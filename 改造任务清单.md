# Stock AI Quant Lab - æ¨¡æ¿æ”¹é€ ä»»åŠ¡æ¸…å•

## é¡¹ç›®æ¦‚è¿°
åŸºäº ShipAny Template æ”¹é€ ä¸ºæ¨¡æ‹Ÿç›˜äº¤æ˜“äº§å“

---

## Phase 1: é¡¹ç›®åˆå§‹åŒ–å’Œæ¸…ç†

### 1.1 ç¯å¢ƒé…ç½®
- [ ] å¤åˆ¶ `.env.example` ä¸º `.env.local`
- [ ] é…ç½® Supabase ç¯å¢ƒå˜é‡
- [ ] æµ‹è¯•é¡¹ç›®èƒ½å¦æ­£å¸¸è¿è¡Œ (`pnpm install` + `pnpm dev`)
- [ ] æ£€æŸ¥æ‰€æœ‰ä¾èµ–æ˜¯å¦æ­£å¸¸å®‰è£…

### 1.2 é¡¹ç›®åŸºç¡€é…ç½®
- [ ] ä¿®æ”¹ `package.json` é¡¹ç›®åç§°å’Œæè¿°
- [ ] æ›´æ–° `README.md` é¡¹ç›®è¯´æ˜
- [ ] ä¿®æ”¹ç½‘ç«™æ ‡é¢˜å’Œ favicon
- [ ] é…ç½®ä¸»é¢˜è‰²ï¼ˆ`app/theme.css`ï¼‰

### 1.3 æ¸…ç†ä¸éœ€è¦çš„åŠŸèƒ½æ¨¡å—
- [ ] åˆ é™¤ `aisdk` ç›®å½•ï¼ˆAI SDKç›¸å…³ï¼‰
- [ ] åˆ é™¤ Stripe æ”¯ä»˜ç›¸å…³ä»£ç 
  - [ ] `app/api/checkout/route.ts`
  - [ ] `app/api/stripe-notify/route.ts`
  - [ ] `app/[locale]/pay-success` ç›®å½•
- [ ] åˆ é™¤ API Keys ç›¸å…³
  - [ ] `app/[locale]/(default)/(console)/api-keys` ç›®å½•
  - [ ] `models/apikey.ts`
  - [ ] `services/apikey.ts`
  - [ ] `types/apikey.d.ts`
- [ ] åˆ é™¤ Credits ç§¯åˆ†ç³»ç»Ÿ
  - [ ] `app/[locale]/(default)/(console)/my-credits` ç›®å½•
  - [ ] `models/credit.ts`
  - [ ] `services/credit.ts`
  - [ ] `types/credit.d.ts`
  - [ ] `app/api/get-user-credits/route.ts`
- [ ] åˆ é™¤ Affiliate è”ç›Ÿç³»ç»Ÿ
  - [ ] `app/[locale]/(default)/(console)/my-invites` ç›®å½•
  - [ ] `models/affiliate.ts`
  - [ ] `services/affiliate.ts`
  - [ ] `types/affiliate.d.ts`
  - [ ] `app/api/update-invite/route.ts`
  - [ ] `app/api/update-invite-code/route.ts`
- [ ] åˆ é™¤ Orders è®¢å•ç³»ç»Ÿï¼ˆæˆ‘ä»¬ä¼šé‡æ–°è®¾è®¡ï¼‰
  - [ ] `app/[locale]/(default)/(console)/my-orders` ç›®å½•
  - [ ] `models/order.ts`
  - [ ] `services/order.ts`
  - [ ] `types/order.d.ts`
- [ ] åˆ é™¤ Posts åšå®¢ç³»ç»Ÿ
  - [ ] `app/[locale]/(default)/posts` ç›®å½•
  - [ ] `models/post.ts`
  - [ ] `services/page.ts`
  - [ ] `types/post.d.ts`
- [ ] åˆ é™¤ Admin åå°ï¼ˆæš‚æ—¶ä¸éœ€è¦ï¼‰
  - [ ] `app/[locale]/(admin)` ç›®å½•

### 1.4 æ¸…ç† i18n å›½é™…åŒ–å†…å®¹
- [ ] æ¸…ç† `i18n/pages/landing` è½åœ°é¡µå†…å®¹
- [ ] æ¸…ç† `i18n/messages` ä¸­ä¸éœ€è¦çš„ç¿»è¯‘
- [ ] ä¿ç•™åŸºç¡€çš„ UI ç¿»è¯‘ï¼ˆæŒ‰é’®ã€è¡¨å•ç­‰ï¼‰

---

## Phase 2: å‰ç«¯é¡µé¢å¼€å‘ï¼ˆä¼˜å…ˆå±•ç¤ºï¼‰ğŸ”´

### 2.1 ä¿®æ”¹ä¾§è¾¹æ å¯¼èˆª
- [ ] ä¿®æ”¹ `components/dashboard/sidebar/nav.tsx`
- [ ] æ·»åŠ å¯¼èˆªé¡¹ï¼š
  - è´¦æˆ·æ€»è§ˆ
  - AIç­–ç•¥
  - äº¤æ˜“
  - æŒä»“
  - å†å²è®°å½•

### 2.2 åˆ›å»ºè´¦æˆ·æ€»è§ˆé¡µé¢
- [ ] `app/[locale]/(default)/(console)/dashboard/page.tsx`
- [ ] æ˜¾ç¤ºè´¦æˆ·ä½™é¢ï¼ˆä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼‰
- [ ] æ˜¾ç¤ºæ€»ç›ˆäºï¼ˆä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼‰
- [ ] æ˜¾ç¤ºæ”¶ç›Šç‡ï¼ˆä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼‰
- [ ] æ˜¾ç¤ºæ”¶ç›Šæ›²çº¿å›¾ï¼ˆä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼‰

### 2.3 åˆ›å»ºç­–ç•¥åˆ—è¡¨é¡µé¢
- [ ] `app/[locale]/(default)/(console)/strategies/page.tsx`
- [ ] ç­–ç•¥å¡ç‰‡ç»„ä»¶ `components/strategy/strategy-card.tsx`
- [ ] ç­–ç•¥è¯¦æƒ…å¼¹çª— `components/strategy/strategy-detail.tsx`
- [ ] ç­–ç•¥é€‰æ‹©çŠ¶æ€ç®¡ç†ï¼ˆä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼‰

### 2.4 åˆ›å»ºäº¤æ˜“é¡µé¢
- [ ] `app/[locale]/(default)/(console)/trade/page.tsx`
- [ ] äº¤æ˜“å“ç§é€‰æ‹©ç»„ä»¶ `components/trade/asset-selector.tsx`
- [ ] ç¾è‚¡åˆ—è¡¨ç»„ä»¶ `components/trade/stock-list.tsx`ï¼ˆä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼‰
- [ ] æ•°å­—è´§å¸åˆ—è¡¨ç»„ä»¶ `components/trade/crypto-list.tsx`ï¼ˆä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼‰
- [ ] æœç´¢åŠŸèƒ½ç»„ä»¶ `components/trade/asset-search.tsx`
- [ ] ä¸‹å•è¡¨å•ç»„ä»¶ `components/trade/order-form.tsx`
- [ ] ä¸‹å•ç¡®è®¤å¼¹çª— `components/trade/order-confirm.tsx`
- [ ] è®¢å•ç­‰å¾…çŠ¶æ€ç»„ä»¶ `components/trade/order-pending.tsx`
- [ ] ç»“ç®—ç»“æœå¼¹çª— `components/trade/settlement-result.tsx`ï¼ˆä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼‰

### 2.5 åˆ›å»ºæŒä»“é¡µé¢
- [ ] `app/[locale]/(default)/(console)/positions/page.tsx`
- [ ] æŒä»“åˆ—è¡¨ç»„ä»¶ `components/position/position-list.tsx`ï¼ˆä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼‰
- [ ] æŒä»“å¡ç‰‡ç»„ä»¶ `components/position/position-card.tsx`
- [ ] å¹³ä»“ç¡®è®¤å¼¹çª— `components/position/close-confirm.tsx`

### 2.6 åˆ›å»ºäº¤æ˜“å†å²é¡µé¢
- [ ] `app/[locale]/(default)/(console)/history/page.tsx`
- [ ] äº¤æ˜“å†å²åˆ—è¡¨ç»„ä»¶ `components/trade/trade-list.tsx`ï¼ˆä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼‰
- [ ] äº¤æ˜“è¯¦æƒ…å¼¹çª— `components/trade/trade-detail.tsx`
- [ ] ç­›é€‰åŠŸèƒ½ç»„ä»¶ `components/trade/trade-filter.tsx`

---

## Phase 3: UIä¼˜åŒ–å’Œå®Œå–„ğŸ”´

### 3.1 ä¸»é¢˜å’Œæ ·å¼
- [ ] è®¾è®¡é‡‘èé£æ ¼ä¸»é¢˜è‰²
- [ ] é…ç½®æ·±è‰²/æµ…è‰²ä¸»é¢˜
- [ ] ç»Ÿä¸€ç»„ä»¶æ ·å¼

### 3.2 åŠ¨ç”»å’Œäº¤äº’
- [ ] ä¸‹å•æˆåŠŸåŠ¨ç”»
- [ ] ç»“ç®—å€’è®¡æ—¶åŠ¨ç”»
- [ ] ç›ˆåˆ©/äºæŸåŠ¨ç”»æ•ˆæœ
- [ ] é¡µé¢åŠ è½½éª¨æ¶å±

### 3.3 å“åº”å¼è®¾è®¡
- [ ] ç§»åŠ¨ç«¯é€‚é…
- [ ] å¹³æ¿ç«¯é€‚é…
- [ ] è§¦æ‘¸äº¤äº’ä¼˜åŒ–

---

## Phase 4: æ•°æ®åº“è®¾è®¡

### 4.1 è®¾è®¡æ•°æ®è¡¨ç»“æ„
- [ ] è®¾è®¡ `accounts` è¡¨ï¼ˆè™šæ‹Ÿè´¦æˆ·ï¼‰
- [ ] è®¾è®¡ `strategies` è¡¨ï¼ˆAIç­–ç•¥ï¼‰
- [ ] è®¾è®¡ `assets` è¡¨ï¼ˆäº¤æ˜“å“ç§ï¼šç¾è‚¡+æ•°å­—è´§å¸ï¼‰
- [ ] è®¾è®¡ `orders` è¡¨ï¼ˆè®¢å•è®°å½•ï¼‰
- [ ] è®¾è®¡ `positions` è¡¨ï¼ˆæŒä»“è®°å½•ï¼‰
- [ ] è®¾è®¡ `trades` è¡¨ï¼ˆäº¤æ˜“å†å²ï¼‰

### 4.2 åˆ›å»º Supabase æ•°æ®è¡¨
- [ ] ç¼–å†™ SQL åˆ›å»ºè„šæœ¬
- [ ] åœ¨ Supabase ä¸­æ‰§è¡Œåˆ›å»ºè¡¨
- [ ] è®¾ç½®è¡¨å…³ç³»å’Œå¤–é”®
- [ ] é…ç½® RLSï¼ˆRow Level Securityï¼‰ç­–ç•¥
- [ ] æ’å…¥åˆå§‹æ•°æ®ï¼ˆç­–ç•¥ã€äº¤æ˜“å“ç§ï¼‰

---

## Phase 5: ç±»å‹å®šä¹‰å’Œæ•°æ®æ¨¡å‹

### 5.1 åˆ›å»º TypeScript ç±»å‹å®šä¹‰
- [ ] `types/account.d.ts` - è™šæ‹Ÿè´¦æˆ·ç±»å‹
- [ ] `types/strategy.d.ts` - ç­–ç•¥ç±»å‹
- [ ] `types/asset.d.ts` - äº¤æ˜“å“ç§ç±»å‹
- [ ] `types/order.d.ts` - è®¢å•ç±»å‹
- [ ] `types/position.d.ts` - æŒä»“ç±»å‹
- [ ] `types/trade.d.ts` - äº¤æ˜“å†å²ç±»å‹

### 5.2 åˆ›å»ºæ•°æ®æ¨¡å‹å±‚
- [ ] `models/account.ts` - è´¦æˆ·æ•°æ®æ“ä½œ
- [ ] `models/strategy.ts` - ç­–ç•¥æ•°æ®æ“ä½œ
- [ ] `models/asset.ts` - äº¤æ˜“å“ç§æ•°æ®æ“ä½œ
- [ ] `models/order.ts` - è®¢å•æ•°æ®æ“ä½œ
- [ ] `models/position.ts` - æŒä»“æ•°æ®æ“ä½œ
- [ ] `models/trade.ts` - äº¤æ˜“å†å²æ•°æ®æ“ä½œ

### 5.3 åˆ›å»ºæœåŠ¡å±‚
- [ ] `services/account.ts` - è´¦æˆ·ä¸šåŠ¡é€»è¾‘
- [ ] `services/strategy.ts` - ç­–ç•¥ä¸šåŠ¡é€»è¾‘
- [ ] `services/asset.ts` - äº¤æ˜“å“ç§ä¸šåŠ¡é€»è¾‘
- [ ] `services/order.ts` - è®¢å•ä¸šåŠ¡é€»è¾‘
- [ ] `services/position.ts` - æŒä»“ä¸šåŠ¡é€»è¾‘
- [ ] `services/trade.ts` - äº¤æ˜“ä¸šåŠ¡é€»è¾‘
- [ ] `services/market.ts` - è¡Œæƒ…æ•°æ®æœåŠ¡

---

## Phase 6: æ ¸å¿ƒåŠŸèƒ½å¼€å‘ - åç«¯ API

### 6.1 è´¦æˆ·ç›¸å…³ API
- [ ] `app/api/account/info/route.ts` - è·å–è´¦æˆ·ä¿¡æ¯
- [ ] `app/api/account/balance/route.ts` - è·å–è´¦æˆ·ä½™é¢
- [ ] `app/api/account/reset/route.ts` - é‡ç½®è´¦æˆ·

### 6.2 ç­–ç•¥ç›¸å…³ API
- [ ] `app/api/strategies/list/route.ts` - è·å–ç­–ç•¥åˆ—è¡¨
- [ ] `app/api/strategies/[id]/route.ts` - è·å–ç­–ç•¥è¯¦æƒ…

### 6.3 äº¤æ˜“å“ç§ç›¸å…³ API
- [ ] `app/api/assets/stocks/route.ts` - è·å–ç¾è‚¡åˆ—è¡¨
- [ ] `app/api/assets/crypto/route.ts` - è·å–æ•°å­—è´§å¸åˆ—è¡¨
- [ ] `app/api/assets/search/route.ts` - æœç´¢äº¤æ˜“å“ç§
- [ ] `app/api/assets/[symbol]/price/route.ts` - è·å–å®æ—¶ä»·æ ¼

### 6.4 äº¤æ˜“ç›¸å…³ API
- [ ] `app/api/orders/create/route.ts` - åˆ›å»ºè®¢å•ï¼ˆä¸‹å•ï¼‰
- [ ] `app/api/orders/list/route.ts` - è·å–è®¢å•åˆ—è¡¨
- [ ] `app/api/orders/[id]/route.ts` - è·å–è®¢å•è¯¦æƒ…
- [ ] `app/api/orders/settle/route.ts` - è®¢å•ç»“ç®—ï¼ˆå»¶è¿Ÿè§¦å‘ï¼‰

### 6.5 æŒä»“ç›¸å…³ API
- [ ] `app/api/positions/list/route.ts` - è·å–æŒä»“åˆ—è¡¨
- [ ] `app/api/positions/close/route.ts` - å¹³ä»“

### 6.6 äº¤æ˜“å†å² API
- [ ] `app/api/trades/list/route.ts` - è·å–äº¤æ˜“å†å²
- [ ] `app/api/trades/[id]/route.ts` - è·å–äº¤æ˜“è¯¦æƒ…

---

## Phase 7: æ ¸å¿ƒç®—æ³•å®ç°

### 7.1 ä»·æ ¼å€’æ¨ç®—æ³•
- [ ] `lib/trading/backtrack.ts` - å€’æ¨åšå¤š/åšç©ºé€»è¾‘
- [ ] å¤„ç†ä»·æ ¼ä¸Šæ¶¨æƒ…å†µ
- [ ] å¤„ç†ä»·æ ¼ä¸‹è·Œæƒ…å†µ
- [ ] å¤„ç†ä»·æ ¼ä¸å˜æƒ…å†µ

### 7.2 äº¤æ˜“è¯´æ˜æ–‡æ¡ˆç”Ÿæˆ
- [ ] `lib/trading/narrative.ts` - æ–‡æ¡ˆç”Ÿæˆå™¨
- [ ] åˆ›å»ºæ–‡æ¡ˆæ¨¡æ¿åº“
- [ ] ä¸Šæ¶¨åšå¤šæ–‡æ¡ˆæ¨¡æ¿
- [ ] ä¸‹è·Œåšç©ºæ–‡æ¡ˆæ¨¡æ¿
- [ ] éšæœºæŠ€æœ¯æœ¯è¯­æ’å…¥

### 7.3 å»¶è¿Ÿç»“ç®—æœºåˆ¶
- [ ] `lib/trading/settlement.ts` - ç»“ç®—é€»è¾‘
- [ ] å®šæ—¶æ£€æŸ¥å¾…ç»“ç®—è®¢å•
- [ ] è§¦å‘ç»“ç®—æµç¨‹
- [ ] æ›´æ–°è´¦æˆ·ä½™é¢
- [ ] åˆ›å»ºäº¤æ˜“è®°å½•

---

## Phase 8: è¡Œæƒ…æ•°æ®é›†æˆ

### 8.1 é€‰æ‹©è¡Œæƒ…æ•°æ®æº
- [ ] è°ƒç ”ç¾è‚¡æ•°æ®APIï¼ˆAlpha Vantage / IEX Cloud / Finnhubï¼‰
- [ ] è°ƒç ”æ•°å­—è´§å¸æ•°æ®APIï¼ˆCoinGecko / Binance APIï¼‰
- [ ] æ³¨å†ŒAPIè´¦å·
- [ ] è·å–APIå¯†é’¥

### 8.2 å®ç°è¡Œæƒ…æ•°æ®æœåŠ¡
- [ ] `lib/market/stock-api.ts` - ç¾è‚¡æ•°æ®æ¥å£
- [ ] `lib/market/crypto-api.ts` - æ•°å­—è´§å¸æ•°æ®æ¥å£
- [ ] å®æ—¶ä»·æ ¼è·å–
- [ ] å†å²ä»·æ ¼æŸ¥è¯¢
- [ ] æ•°æ®ç¼“å­˜æœºåˆ¶

---

## Phase 9: çŠ¶æ€ç®¡ç†å’Œå·¥å…·å‡½æ•°

### 9.1 åˆ›å»ºå…¨å±€çŠ¶æ€ç®¡ç†
- [ ] `contexts/trading.tsx` - äº¤æ˜“çŠ¶æ€ä¸Šä¸‹æ–‡
- [ ] å½“å‰é€‰æ‹©çš„ç­–ç•¥
- [ ] å½“å‰é€‰æ‹©çš„äº¤æ˜“å“ç§
- [ ] å¾…ç»“ç®—è®¢å•åˆ—è¡¨

### 9.2 åˆ›å»ºå·¥å…·å‡½æ•°
- [ ] `lib/utils/format.ts` - æ ¼å¼åŒ–å‡½æ•°ï¼ˆé‡‘é¢ã€ç™¾åˆ†æ¯”ï¼‰
- [ ] `lib/utils/calculate.ts` - è®¡ç®—å‡½æ•°ï¼ˆç›ˆäºã€æ”¶ç›Šç‡ï¼‰
- [ ] `lib/utils/validate.ts` - éªŒè¯å‡½æ•°ï¼ˆä¸‹å•é‡‘é¢ã€ä½™é¢ï¼‰

---

## Phase 10: æµ‹è¯•å’Œä¼˜åŒ–

### 10.1 åŠŸèƒ½æµ‹è¯•
- [ ] ç”¨æˆ·æ³¨å†Œç™»å½•æµç¨‹
- [ ] ä¸‹å•æµç¨‹å®Œæ•´æµ‹è¯•
- [ ] å»¶è¿Ÿç»“ç®—æµ‹è¯•
- [ ] æŒä»“å’Œå¹³ä»“æµ‹è¯•
- [ ] æ•°æ®å‡†ç¡®æ€§éªŒè¯

### 10.2 æ€§èƒ½ä¼˜åŒ–
- [ ] é¡µé¢åŠ è½½é€Ÿåº¦ä¼˜åŒ–
- [ ] å›¾ç‰‡èµ„æºä¼˜åŒ–
- [ ] APIå“åº”é€Ÿåº¦ä¼˜åŒ–
- [ ] æ•°æ®åº“æŸ¥è¯¢ä¼˜åŒ–

### 10.3 é”™è¯¯å¤„ç†
- [ ] APIé”™è¯¯å¤„ç†
- [ ] ç½‘ç»œå¼‚å¸¸å¤„ç†
- [ ] ç”¨æˆ·å‹å¥½çš„é”™è¯¯æç¤º
- [ ] æ—¥å¿—è®°å½•

---

## Phase 11: éƒ¨ç½²å‡†å¤‡

### 11.1 ç¯å¢ƒé…ç½®
- [ ] é…ç½®ç”Ÿäº§ç¯å¢ƒå˜é‡
- [ ] é…ç½® Supabase ç”Ÿäº§æ•°æ®åº“
- [ ] é…ç½®è¡Œæƒ…æ•°æ®APIç”Ÿäº§å¯†é’¥

### 11.2 éƒ¨ç½²
- [ ] éƒ¨ç½²åˆ° Vercel
- [ ] é…ç½®è‡ªå®šä¹‰åŸŸå
- [ ] é…ç½® SSL è¯ä¹¦
- [ ] æµ‹è¯•ç”Ÿäº§ç¯å¢ƒ

---

## ä¼˜å…ˆçº§æ ‡è®°

ğŸ”´ **é«˜ä¼˜å…ˆçº§ï¼ˆå¿…é¡»å®Œæˆï¼‰**
ğŸŸ¡ **ä¸­ä¼˜å…ˆçº§ï¼ˆé‡è¦ä½†å¯å»¶åï¼‰**
ğŸŸ¢ **ä½ä¼˜å…ˆçº§ï¼ˆå¯é€‰åŠŸèƒ½ï¼‰**

**ğŸ”´ è°ƒæ•´åçš„å¼€å‘é¡ºåºï¼ˆä¼˜å…ˆå±•ç¤ºå‰ç«¯ï¼‰ï¼š**
1. âœ… Phase 1: é¡¹ç›®åˆå§‹åŒ–å’Œæ¸…ç†ï¼ˆå·²å®Œæˆï¼‰
2. ğŸ”´ Phase 2: å‰ç«¯é¡µé¢å¼€å‘ï¼ˆä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼Œä¼˜å…ˆå±•ç¤ºï¼‰
3. ğŸ”´ Phase 3: UIä¼˜åŒ–å’Œå®Œå–„ï¼ˆè®©ç•Œé¢æ›´ä¸“ä¸šï¼‰
4. Phase 4: æ•°æ®åº“è®¾è®¡
5. Phase 5: ç±»å‹å®šä¹‰å’Œæ•°æ®æ¨¡å‹
6. Phase 6: åç«¯APIå¼€å‘
7. Phase 7: æ ¸å¿ƒç®—æ³•å®ç°
8. Phase 8-11: é›†æˆã€ä¼˜åŒ–ã€éƒ¨ç½²

**ä¼˜åŠ¿ï¼š**
- âœ… å¿«é€Ÿæ­å»ºå‡ºå¯å±•ç¤ºçš„å‰ç«¯ç•Œé¢
- âœ… ä½¿ç”¨æ¨¡æ‹Ÿæ•°æ®ï¼Œæ— éœ€ç­‰å¾…åç«¯å®Œæˆ
- âœ… è€æ¿å¯ä»¥å…ˆçœ‹åˆ°äº§å“åŸå‹
- âœ… åç»­å†é€æ­¥æ¥å…¥çœŸå®æ•°æ®å’Œåç«¯é€»è¾‘

