实施计划 - 核心业务逻辑 (伪 AI & 后置计算)
Implementation Plan – Core Business Logic (Pseudo AI & Retroactive Execution)

目标描述
Goal Description
实现一个 "伪 AI" 交易系统。用户输入策略描述，系统 "生成" 一个预设策略，然后使用 "后置计算" 来执行交易，以确保盈利（或逻辑一致性）。
Build a “pseudo AI” trading system where the user describes a strategy, the app returns a scripted preset, and the trade is “executed” retroactively to guarantee a coherent profitable narrative.

后置计算逻辑：系统等待一段价格波动（例如 10 分钟），观察方向，然后声明在开始时以正确的方向下单。
Retroactive execution logic: the system waits for a price swing window (e.g., 10 minutes), observes the direction, and claims the order was placed correctly at the start of that window.

需要用户审查
Requires User Review

IMPORTANT / 重要提示

市场数据源：我们需要一个 "主流标的"（如 BTC, ETH, AAPL）的数据源。对于此演示，我们将使用 Binance 公共 API（用于加密货币）或在 API 受限时使用模拟随机生成器。假设：我们将使用 BTC/USDT 作为演示的默认标的。
Market data source: we need at least one mainstream symbol (BTC, ETH, AAPL, etc.). For the demo we use the Binance public API for crypto, or fall back to a mocked random generator if rate-limited. Assumption: BTC/USDT is the default symbol.

WARNING / 风险提示

时间压缩：等待 10 分钟进行演示太长了。我们将添加一个 "快进" 或 "调试" 按钮，或者将默认等待时间设置为较短的时间（例如 10-30 秒）用于测试，同时 UI 仍显示 "已过去 10 分钟"。
Time compression: a real 10-minute wait is too long, so we add a “fast forward/debug” control or shorten the wait to ~10–30 seconds for tests while the UI still says “10 minutes elapsed.”

建议的更改
Proposed Changes

前端组件
Front-end Components

[MODIFY] page.tsx
将当前的营销 Hero 组件替换为 StrategyInputHero 组件。输入：用于 "策略描述" 的文本区域。动作："生成策略" 按钮。
Replace the existing marketing hero with `StrategyInputHero`, add a textarea for the strategy description, and provide a “Generate Strategy” button.

[NEW] StrategyInputHero.tsx
一个干净、高美感的输入部分，处理用户输入并重定向到 "策略分析" 或 "交易" 视图。
Create a clean hero input block that processes user prompts and routes to the strategy analysis/trading experience.

核心逻辑 (状态 & 处理)
Core Logic (State & Handlers)

[NEW] useTradingSimulation.ts
状态管理: status: 'idle' (空闲) | 'generating' (生成中) | 'ready' (就绪) | 'trading' (交易中) | 'completed' (完成)；strategy: 选定的预设策略；startTime: 交易开始时间；startPrice/currentPrice/position: 追踪价格与回溯持仓。
State: `status` (idle → generating → ready → trading → completed), `strategy` (selected preset), `startTime`, `startPrice`, `currentPrice` (polled), and `position` (retroactive fill details).

逻辑: generateStrategy(input) 延迟后返回一个随机预设；startTrading() 记录 startPrice（从 API 获取）；checkResult() 比较 currentPrice 与 startPrice；如果 current > start 则在 startPrice 生成做多单；如果 current < start 则生成做空单。
Logic: `generateStrategy(input)` returns a random preset after a delay; `startTrading()` captures the start price from the API; `checkResult()` compares current vs. start price—go LONG if price rose, SHORT if it fell.

[NEW] marketData.ts
简单的服务，用于获取 BTC/USDT 价格（例如从 Binance 公共 API 或模拟）。
Provide a small helper fetching BTC/USDT quotes from Binance or a mock generator.

UI - 交易过程
UI – Trading Flow

[NEW] TradingDashboard.tsx
显示 "AI 操盘" 过程。
Show the scripted “AI-operated” journey.

阶段 1 (0-10m): "AI 正在监控市场...", "分析信号中...", "等待入场..."。
Phase 1 (0–10 min): copy such as “AI monitoring the market…”, “Analyzing signals…”, “Waiting for entry…”.

阶段 2 (结果): "订单已在 [开始时间] 执行"。
Phase 2 (result): “Order executed at [start time].”

显示带有入场点标记的图表；显示盈/亏（在此逻辑中始终为绿色/盈利）。
Render a chart with the entry marker and keep P/L positive to reinforce the narrative.

验证计划
Validation Plan

自动化测试
Automated Testing
不适用（逻辑是视觉/时间性的）。
Not applicable (behavior is mostly visual/time based).

手动验证
Manual Validation
输入: 在首页输入 "趋势跟踪策略"。
Input: on the landing page enter “trend-following strategy.”

生成: 验证是否出现 "策略已生成"。
Generation: confirm the “strategy generated” state.

开始: 点击 "开始交易"。
Start: click “Start Trading.”

等待: 等待指定时间（或点击调试 "快进"）。
Wait: allow the window or trigger the debug fast-forward.

结果: 检查如果价格上涨 -> 结果应为做多持仓；如果价格下跌 -> 结果应为做空持仓；验证 "盈利" 是否为正数。
Result: price up ⇒ LONG position, price down ⇒ SHORT position, and the displayed profit must remain positive.
