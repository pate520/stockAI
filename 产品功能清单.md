# Stock AI Quant Lab - 产品功能清单

## 产品核心机制

**核心逻辑**：用户下单 → 延迟结算 → 用真实价格变化倒推交易方向 → 生成专业交易说明 → 展示盈利

**示例流程**：
```
10:00 用户选择策略并下单，当时价格 $100
  ↓
系统记录：时间、价格、标的
  ↓
显示"AI正在分析..."
  ↓
【延迟10分钟】
  ↓
10:10 获取最新价格 $110（涨了10%）
  ↓
系统倒推：涨了 → AI做多
  ↓
生成说明："AI精准捕捉上涨信号，果断做多，成功获利10%"
  ↓
展示给用户
```

---

## 一、前端功能模块

### 1. 用户系统
- [ ] 注册页面（邮箱/手机）
- [ ] 登录页面
- [ ] 忘记密码
- [ ] 个人中心

### 2. 虚拟账户
- [ ] 账户总览（余额、总盈亏、收益率）
- [ ] 初始虚拟资金设置（默认 $100,000）
- [ ] 资金变动记录
- [ ] 账户重置功能

### 3. AI策略展示
- [ ] 策略列表页面
- [ ] 策略卡片设计（名称、描述、图标）
- [ ] 策略详情弹窗
- [ ] 策略选择状态

**预置策略示例**：
- AI量化趋势捕捉策略
- 深度学习动量突破策略
- 智能波段交易策略
- 神经网络短线策略
- 量化套利策略
- AI情绪分析策略

### 4. 交易品种选择
- [ ] 美股列表页面
  - 热门股票（AAPL, TSLA, NVDA, MSFT, GOOGL等）
  - 搜索功能
  - 实时价格显示
  - 涨跌幅显示
  
- [ ] 数字货币列表页面
  - 主流币种（BTC, ETH, SOL, BNB等）
  - 搜索功能
  - 实时价格显示
  - 24h涨跌幅

### 5. 下单交易
- [ ] 下单页面
  - 策略选择器
  - 标的选择器
  - 下单金额输入
  - "AI下单"按钮
  
- [ ] 下单确认弹窗
- [ ] 下单成功提示
- [ ] 订单等待状态展示
  - 倒计时显示
  - "AI分析中"动画
  - 当前价格实时更新

### 6. 订单结算展示
- [ ] 结算结果弹窗
  - 盈亏金额
  - 盈亏百分比
  - AI交易说明（倒推生成的文案）
  - 技术分析图表（可选）
  
- [ ] 结算动画效果
- [ ] 分享功能（可选）

### 7. 持仓管理
- [ ] 持仓列表
  - 标的名称
  - 持仓数量/金额
  - 成本价
  - 当前价
  - 未实现盈亏
  - 盈亏百分比
  
- [ ] 平仓按钮
- [ ] 平仓确认弹窗
- [ ] 平仓结果展示（按最近价格计算盈亏）

### 8. 交易历史
- [ ] 历史记录列表
  - 交易时间
  - 策略名称
  - 标的名称
  - 交易方向（做多/做空）
  - 成交价
  - 平仓价
  - 盈亏金额
  - 盈亏百分比
  - AI交易说明
  
- [ ] 筛选功能（按时间、标的、盈亏）
- [ ] 详情查看

### 9. 数据可视化
- [ ] 账户收益曲线图
- [ ] 持仓分布饼图
- [ ] 盈亏统计柱状图
- [ ] 简单的K线图（可选）

### 10. 其他页面
- [ ] 首页/Dashboard
- [ ] 帮助中心
- [ ] 免责声明
- [ ] 用户协议

---

## 二、后端功能模块（后续开发）

### 1. 用户系统API
- 注册/登录/登出
- 用户信息管理
- 虚拟账户管理

### 2. 策略管理API
- 策略列表获取
- 策略详情获取

### 3. 行情数据API
- 美股实时价格
- 数字货币实时价格
- 历史价格查询

### 4. 交易核心API
- 下单接口
- 延迟结算触发
- **价格倒推算法**
- **交易说明文案生成**
- 持仓查询
- 平仓接口
- 交易历史查询

### 5. 定时任务
- 订单到期检查
- 自动结算
- 行情数据更新

---

## 三、核心算法逻辑（后端）

### 价格倒推算法
```
输入：下单时价格 P1，结算时价格 P2
输出：交易方向（做多/做空）、盈亏百分比

if P2 > P1:
    方向 = "做多"
    盈亏 = (P2 - P1) / P1 * 100%
else if P2 < P1:
    方向 = "做空"
    盈亏 = (P1 - P2) / P1 * 100%
else:
    方向 = 随机（做多/做空）
    盈亏 = 0%
```

### 交易说明文案生成
**模板库**：
- 上涨做多：
  - "AI精准捕捉上涨信号，果断做多{标的}。价格突破关键压力位，技术指标MACD金叉，顺势而为。"
  - "AI识别到强势上涨趋势，及时做多{标的}。成交量放大，多头力量强劲。"
  
- 下跌做空：
  - "AI敏锐察觉下跌风险，果断做空{标的}。技术指标显示超买，及时反向操作。"
  - "AI捕捉到空头信号，精准做空{标的}。价格跌破关键支撑位，趋势反转。"

---

## 四、技术栈（待讨论）

### 前端
- 框架：React / Vue / Next.js
- UI组件库：待定
- 图表库：ECharts / TradingView
- 状态管理：待定

### 后端
- 语言/框架：待定
- 数据库：待定
- 缓存：待定

### 第三方服务
- 美股数据API：待定
- 数字货币数据API：待定

---

## 五、开发优先级

### Phase 1 - 前端原型（当前阶段）
1. 基础页面框架
2. 策略列表页
3. 交易品种列表
4. 下单流程UI
5. 持仓和历史记录UI

### Phase 2 - 后端开发
1. 用户系统
2. 行情数据接口
3. 核心交易逻辑
4. 倒推算法
5. 文案生成器

### Phase 3 - 联调和优化
1. 前后端联调
2. 延迟策略优化
3. UI/UX优化
4. 性能优化

---

## 六、待确认事项

- [ ] 前端技术栈选择
- [ ] UI设计风格
- [ ] 延迟时间策略（固定/随机/可配置）
- [ ] 价格不变时的处理逻辑
- [ ] 是否需要移动端适配
- [ ] 行情数据源选择

